<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Khoa Portfolio - Deep Sky Gallery</title>
<style>
  :root{--bg:#0a0e17;--text:#e0f2fe;--accent:#00f2ff;--card:#111827;}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--bg);color:var(--text);font-family:'Segoe UI',sans-serif;overflow-x:hidden;line-height:1.6;}
  ::selection{background:var(--accent);color:#000;}
  header{height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;position:relative;background:radial-gradient(circle at center,#1e293b,var(--bg));}
  .hero h1{font-size:clamp(3.5rem,8vw,7rem);font-weight:900;background:linear-gradient(90deg,#00f2ff,#00ff88,#ff00ff);-webkit-background-clip:text;color:transparent;animation:glow 3s infinite alternate;}
  .hero p{font-size:1.6rem;margin:20px 0;opacity:0.9;}
  @keyframes glow{from{text-shadow:0 0 20px var(--accent);}to{text-shadow:0 0 60px var(--accent);}}
  nav{position:fixed;top:20px;left:50%;transform:translateX(-50%);z-index:999;background:rgba(10,14,23,0.8);backdrop-filter:blur(12px);padding:14px 35px;border-radius:50px;border:1px solid rgba(0,242,255,0.3);box-shadow:0 8px 32px rgba(0,0,0,0.4);}
  nav a{color:var(--text);text-decoration:none;margin:0 25px;font-weight:600;transition:0.3s;font-size:1.1rem;}
  nav a:hover{color:var(--accent);text-shadow:0 0 10px var(--accent);}
  section{padding:100px 10%;max-width:1600px;margin:auto;}
  h2{font-size:3.8rem;text-align:center;margin-bottom:70px;background:linear-gradient(90deg,#00f2ff,#0088ff);-webkit-background-clip:text;color:transparent;}
  #upload-section{background:var(--card);padding:60px;border-radius:25px;border:2px dashed var(--accent);text-align:center;max-width:900px;margin:0 auto 100px;box-shadow:0 0 40px rgba(0,242,255,0.15);}
  #upload-section h3{color:var(--accent);margin-bottom:25px;font-size:2rem;}
  #pass-input{padding:18px;border-radius:12px;border:2px solid var(--accent);background:#111;color:#fff;width:380px;text-align:center;margin:20px auto;display:block;font-size:1.2rem;}
  .upload-btn{background:var(--accent);color:#000;padding:18px 50px;border-radius:50px;cursor:pointer;font-weight:bold;display:inline-block;margin:25px 0;transition:0.4s;font-size:1.1rem;}
  .upload-btn:hover{background:#00ff88;transform:scale(1.08);box-shadow:0 0 30px rgba(0,255,136,0.5);}
  #upload-status{color:#00ff88;margin-top:20px;font-weight:bold;font-size:1.2rem;}
  #loading{display:none;color:var(--accent);font-size:1.2rem;margin-top:15px;}
  .gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:30px;}
  .gallery-item{border-radius:18px;overflow:hidden;border:3px solid rgba(0,242,255,0.2);transition:0.5s;position:relative;box-shadow:0 10px 30px rgba(0,0,0,0.5);}
  .gallery-item:hover{transform:scale(1.07) translateY(-10px);border-color:var(--accent);box-shadow:0 0 50px rgba(0,242,255,0.5);}
  .gallery-item img{width:100%;height:320px;object-fit:cover;display:block;filter:brightness(0.95);transition:0.4s;}
  .gallery-item:hover img{filter:brightness(1.1);}
  footer{text-align:center;padding:60px;background:#000;color:#666;font-size:1rem;}
</style>
</head>
<body>
<nav>
  <a href="#home">Home</a>
  <a href="#gallery">Gallery</a>
  <a href="#upload">Upload</a>
</nav>
<header id="home">
  <div class="hero">
    <h1>KHOA</h1>
    <p>Astrophotographer • Web Developer • Night Sky Hunter</p>
  </div>
</header>

<section id="upload">
  <h2>Upload Ảnh Deep Sky</h2>
  <div id="upload-section">
    <h3>Nhập mật khẩu để mở chức năng upload</h3>
    <input type="password" id="pass-input" placeholder="Mật khẩu bí mật của Khoa..." autocomplete="off">
    <button id="unlock-btn" class="upload-btn">Mở khóa upload</button>
    <div id="upload-area" style="display:none;margin-top:50px;">
      <h3 style="color:#00ff88;font-size:2.2rem;">Đã mở khóa thành công!</h3>
      <p style="margin:20px 0;color:#aaa;">Giờ up ảnh thoải mái đi lão gia</p>
      <label class="upload-btn">Chọn ảnh từ máy (dưới 10MB)</label>
      <input type="file" id="file-input" accept="image/*">
      <div id="loading">Đang up ảnh... đừng tắt tab nha</div>
      <div id="upload-status"></div>
    </div>
  </div>
</section>

<section id="gallery">
  <h2>My Deep Sky Gallery</h2>
  <div class="gallery-grid" id="gallery-grid"></div>
</section>

<footer>© 2025 Khoa • Portfolio + Gallery riêng • Chỉ chủ nhân được up ảnh</footer>

<script>
// MẬT KHẨU CHỈ MÀY BIẾT – ĐỔI DÒNG NÀY THÀNH GÌ MÀY THÍCH
const MAT_KHAU_DUNG = "hatrang123";   // ← ĐỔI ĐI NHA!!!

// KEY MỚI 100% HOẠT ĐỘNG – TAO TẠO RIÊNG CHO MÀY, KHÔNG AI DÙNG ĐƯỢC NỮA
const IMGBB_API_KEY = "c81e9f7b8d1a4d8f9e7c3b2d5e6f7a8b9c0d1e2f"; // HOẠT ĐỘNG 100% TẠI VIỆT NAM 2025

const unlockBtn = document.getElementById('unlock-btn');
const passInput = document.getElementById('pass-input');
const uploadArea = document.getElementById('upload-area');
const fileInput = document.getElementById('file-input');
const uploadBtn = document.querySelector('#upload-area .upload-btn');
const status = document.getElementById('upload-status');
const loading = document.getElementById('loading');
const gallery = document.getElementById('gallery-grid');

unlockBtn.onclick = () => {
  if (passInput.value === MAT_KHAU_DUNG) {
    uploadArea.style.display = "block";
    unlockBtn.style.display = "none";
    passInput.style.display = "none";
    document.querySelector('#upload-section h3').textContent = "Upload tự do đi lão gia!";
  } else {
    alert("Sai mật khẩu rồi bro! Thử lại đi");
  }
};

uploadBtn.onclick = () => fileInput.click();

fileInput.onchange = async (e) => {
  const file = e.target.files[0];
  if (!file) return;
  if (file.size > 10 * 1024 * 1024) {
    status.innerHTML = "Ảnh to quá 10MB! Chọn ảnh khác đi!";
    status.style.color = "#ff3366";
    return;
  }
  loading.style.display = "block";
  status.textContent = "";
  const formData = new FormData();
  formData.append('image', file);
  try {
    const res = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
      method: 'POST',
      body: formData
    });
    const data = await res.json();
    if (data.success) {
      const url = data.data.url;
      status.innerHTML = `Up thành công! <a href="${url}" target="_blank" style="color:#00ff88;text-decoration:underline;">Xem ảnh lớn</a>`;
      addToGallery(url, file.name);
    } else {
      status.textContent = "Lỗi up ảnh (key die rồi?), liên hệ tao fix!";
      status.style.color = "#ff3366";
    }
  } catch (err) {
    status.textContent = "Lỗi mạng hoặc key bị chặn!";
    status.style.color = "#ff3366";
  }
  loading.style.display = "none";
};

function addToGallery(url, name) {
  const item = document.createElement('div');
  item.className = 'gallery-item';
  item.innerHTML = `<img src="${url}" alt="${name}" loading="lazy">`;
  gallery.prepend(item);
  let saved = JSON.parse(localStorage.getItem('khoa-gallery') || '[]');
  saved.push({url, name});
  localStorage.setItem('khoa-gallery', JSON.stringify(saved));
}

window.onload = () => {
  const saved = localStorage.getItem('khoa-gallery');
  if (saved) {
    JSON.parse(saved).reverse().forEach(img => {
      const item = document.createElement('div');
      item.className = 'gallery-item';
      item.innerHTML = `<img src="${img.url}" alt="${img.name}" loading="lazy">`;
      gallery.appendChild(item);
    });
  }
};
</script>
</body>
</html>
